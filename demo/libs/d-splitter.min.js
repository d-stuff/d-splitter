!function(e){"use strict";e.module("dSplitter",[]).directive("dSplitter",["$compile","$timeout","$window","$document",function(t,i,o,s){function a(e,t){this.message=e,this.scope=t.scope,this.el=t.el}function r(e){return{width:e.width(),height:e.height()}}function n(t,i,s,a,n,l){var d=0;n=e.copy(n);var c=r(t),u={size:t.data("isHorizontal")?a.outerHeight():a.outerWidth()};c.size=t.data("isHorizontal")?c.height:c.width,n.size="%"===(""+n.size).slice(-1)?c.size*parseInt(n.size)/100-.5*u.size:n.size,n.size<0&&(n.size+=c.size-u.size),n.size=Math.min(Math.max(n.size,n.min||0),n.max||n.size,c.size-u.size);var m={},f={},z={};return t.data("isHorizontal")?(f.left=m.left=f.right=m.right=0,f[s?"top":"bottom"]=m[s?"bottom":"top"]=0,m.height=n.size,f.height=c.height-m.height-u.size,z[s?"bottom":"top"]=m.height,z.height=u.size,Math.min(m.height,f.height)<=h&&(d=(m.height<f.height?s:s?0:1)+1)):(f.top=m.top=f.bottom=m.bottom=0,f[s?"left":"right"]=m[s?"right":"left"]=0,m.width=n.size,f.width=c.width-m.width-u.size,z[s?"right":"left"]=m.width,z.width=u.size,Math.min(m.width,f.width)<=h&&(d=(m.width<f.width?s:s?0:1)+1)),i.eq(s).css(m),i.eq(s?0:1).css(f),a.css(z),l||o.resize(),d}function l(e,t,i,o,s){var a,r={width:e.width(),height:e.height()};return e.data("isHorizontal")?(r.size=r.height,a=t?r.size-o-i.outerHeight():o):(r.size=r.width,a=t?r.size-o-i.outerWidth():o),a>=s.min&&a<=(s.max||r.size)?a:!1}o=$(o),s=$(s);var d=".dSplitter",h=30;return{restrict:"E",compile:function(r){var h=r.html();return r.html(""),{pre:function(){},post:function(r,c,u){function m(e,t){z.removeClass("collapsed"),g=!0;var i=z.eq(e).addClass("collapsed"),o=i.children(".collapse-button");H.size=e===p?o["outer"+f]():0-o["outer"+f](),n(c,z,p,x,H,t)}c.html(h).data("isHorizontal","h"===u.type);var f=c.data("isHorizontal")?"Height":"Width",z=c.children().addClass(c.data("isHorizontal")?"horizontal":"vertical"),p="2"===u.referEl?1:0,v=u.collapseEl?u.collapseEl-1:p?0:1,g=!1,w=!1;if(2!==z.length)throw new a("should be exactly 2 children to the splitter!",{el:c});var C=z.eq(p),b={size:u.size||C[f.toLowerCase()]()||"50%",min:parseInt("0"+(u.min||C.css("min-"+f.toLowerCase())||0),10),max:parseInt("0"+(u.max||C.css("max-"+f.toLowerCase())),10)},H={min:0};C.addClass("referred"),z.css("max-"+f.toLowerCase(),"none").css("min-"+f.toLowerCase(),"0");var x=$("<div />").addClass("splitter-bar").addClass(c.data("isHorizontal")?"horizontal":"vertical").insertAfter(z.eq(0)).on("mousedown"+d,function(){function t(){i(function(){return w?w=!1:(o(),void n(c,z,p,x,b))},100)}function o(t){(t?c.children(".splitter-bar.clone"):h).remove(),c.off("mousemove"+d).off("mouseup"+d).off("mousedown"+d),s.off("mouseup"+d).off("mouseout"+d),i(function(){e.forEach([C,z,E,x],function(e){e.removeClass("unselectable").removeAttr("unselectable")}),r.remove()},500),E.css("cursor","auto")}var a=g;g=!1,z.removeClass("collapsed");var r=$("<div />").addClass("screen").appendTo(c),h=x.clone().addClass("clone"),u=c.data("isHorizontal")?"top":"left",m=c.data("isHorizontal")?"pageY":"pageX",C=$("d-splitter"),E=$("body").css("cursor",c.data("isHorizontal")?"s-resize":"e-resize");x.after(h),e.forEach([C,z,E,x],function(e){e.addClass("unselectable").attr("unselectable","on")});b.size;c.on("mousemove"+d,function(e){var t=e[m]-c.offset()[u],i=l(c,p,h,t,b);return i?(h.css(u,t).removeClass("error"),b.size=i,!0):void h.addClass("error")}).on("mouseup"+d,t),i(function(){c.on("mousedown"+d,function(){if(w=!0,z.removeClass("collapsed"),g=!a){var e=z.eq(v).addClass("collapsed"),t=e.children(".collapse-button");H.size=v===p?t["outer"+f]():0-t["outer"+f]()}o(!0),n(c,z,p,x,g?H:b)})}),s.on("mouseup"+d,t).on("mouseout"+d,function(e){e=e?e:window.event;var i=e.relatedTarget||e.toElement;i&&"HTML"!=i.nodeName||t()})});e.forEach(z,function(e){var t=$(e);if(!t.is("[splitter-collapse=false]")){var i=t.is(C),o="outer"+f;$("<button />").addClass("collapse-button").on("click"+d,function(){g=!(t.is(".collapsed")&&g),z.removeClass("collapsed"),g&&(t.addClass("collapsed"),H.size=i?$(this)[o]():0-$(this)[o]()),n(c,z,p,x,g?H:b)}).prependTo(e)}});var E=n(c,z,p,x,g?H:b);E&&m(E-1),z.addClass("splitter-pane"),o.resize(function(){var e=n(c,z,p,x,g?H:b,!0);e&&m(e-1,!0)}),t(c.contents())(r)}}}}}])}(angular);
//# sourceMappingURL=d-splitter.min.js.map